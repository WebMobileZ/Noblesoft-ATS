<p-toast></p-toast>
<!-- prime table-->

<div class="p-grid p-m-2">
  <div class="p-col">
    <!-- <div class="float-right"> -->

    <!-- </div> -->

    <p-table  [value]="users" [rows]="10" [autoLayout]="true " [showCurrentPageReport]="true"
    [rowsPerPageOptions]="[10,15,50]" [loading]="loading" [rowHover]="true"
    [reorderableColumns]="true"  styleClass="p-datatable-consultants  p-datatable-gridlines"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} Users"
    [paginator]="true"
    >

      <ng-template pTemplate="caption">

        <div class="p-d-flex">

          <div class=" p-d-flex p-ai-center p-jc-between">Users</div>
          <div class="p-input-icon-left p-ml-auto">
            <span>

              <p-dropdown styleClass="p-mr-4" (onChange)="searchUsers()" placeholder="Role Filter"  [(ngModel)]="roleFilter" [options]="roleFilterValues" optionLabel="name"
              optionValue="value">
            </p-dropdown>
            </span>
          </div>
          <a pButton pRipple label="Add User" icon="pi pi-plus" class="p-button-success p-mr-2" routerLink="/users/create"
          ></a>


        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Status</th>
          <th>Created At</th>
          <th>Performance</th>
          <th>Resume Search</th>
          <th>Action</th>
        </tr>

      </ng-template>
      <ng-template pTemplate="body" let-customer>
        <tr [ngStyle]="{'background-color':getColor(customer?.user_status)}">
          <td>
            {{customer.name}}
          </td>
          <td>
            {{customer.email}}
          </td>

          <td>
            {{customer.role=='Admin'?'Admin':null}}{{customer.role=='admin'?'Admin':null}}
            {{customer.role=='bdm'?'Business Development Manager':null}}
            {{customer.role=='accountmanager'?'Account Manager':null}}
            {{customer.role=='a-b-manager'?'Account Manager/Business development Manager':null}}
            {{customer.role=='recruiter'?'IT Recruiter':null}}
            {{customer.role=='head-hunters'?'Head Hunter':null}}
            {{customer.role=='head-hunters-admin'?'Head Hunter Admin':null}}
            {{customer.role=='adminhunters'?'Head Hunter Admin':null}}
            {{customer.role=='bench-sales'?'Bench sales Lead':null}}
            {{customer.role=='jr-bench-sales'?'Bench sales':null}}
            {{customer.role=='sales-lead'?'Sales Lead':null}}

          </td>
          <td>
            {{customer.user_status=='A'?'Active':''}}
            {{customer.user_status=='B'?'Block':''}}
            {{customer.user_status=='D'?'Deleted':''}}
          </td>
          <td>
            {{customer.created_at | date}}
          </td>
          <td>
            <p-rating [(ngModel)]="customer.performance" readonly="true" [cancel]="false"  ></p-rating>
          </td>
          <td>
            <i class="pi" [ngClass]="{'true-icon pi-check-circle': customer.isResume, 'false-icon pi-times-circle': !customer.isResume}"></i>
          </td>
          <td>
            <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success p-mr-2"
            (click)="editUser(customer.id)"></button>

            <button *ngIf="customer.user_status!=='D'" pButton pRipple icon="pi pi-trash"  class="p-button-rounded p-button-warning"
            (click)="deleteProduct($event,customer)" ></button>

          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6">No Users found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<p-confirmPopup></p-confirmPopup>
